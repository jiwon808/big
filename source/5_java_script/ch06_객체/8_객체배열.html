<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script>
        var students = [{ name: '홍길동', kor: 100, mat: 98, eng: 88, sci: 100 }]; 
        students.push({ name: '김길동', kor: 89, mat: 90, eng: 88, sci: 79 })
        students.push({ name: '박길동', kor: 91, mat: 90, eng: 88, sci: 89 })
        students.push({ name: '이길동', kor: 79, mat: 90, eng: 88, sci: 99 })
        students.push({ name: '윤길동', kor: 76, mat: 90, eng: 88, sci: 99 })
        students.push({ name: '정길동', kor: 88, mat: 90, eng: 88, sci: 79 })
        for (var idx in students) {
            students[idx].getSum = function () {
                return this.kor + this.mat + this.eng + this.sci;
            };
            students[idx].getAvg = function () {
                return this.getSum() / 4; //평균  소수점 유지 
            }
            students[idx].toString = function () {
                var output = '';
                for (var key in this) {
                    if (key != 'toString' && key != 'getSum' && key != 'getAvg') {
                        output += key + ':' + this[key] + '\n';
                    } else if (key == 'getSum' || key == 'getAvg') {
                        output += key.substring(3) + ":" + this[key]() + '\n';  //key하면 getSum이 다나옴  () 'function을호출' 아니면 function내용이나옴
                    } //else if    ******************substring   string의s가 소문자https://www.w3schools.com/jsref
                }//for
                return output;
            }; 
        }
        // 1.일반 for문
        var output = '';
        for (var idx = 0; idx < students.length; idx++) {
            output += idx + '번째\n';
            output += students[idx];
        }
        alert(output);
        //document.write(output.replace('\n','<br>'));  //첫번째 \n만 br로바껴   ***왜 꼭 br 로 바꿔야하는지??
        document.write(replaceAll(output, '\n', '<br>'));
        // 2. for-in문
        document.write('<h2>2.for-in문의 이용</h2>');
        for (var idx in students) {
            document.write(students[idx] + '<br>');

        }
        //3. forEach()
        document.write('<h2>3.forEach()이용</h2>');
        students.forEach(function (data, idx) {
            document.write(idx + "번째 :");
            document.write(data + '<br>');
        }); //forEach안에 콜백함수 (매개변수 안에 들어갈 함수)
        //replaceAll: output에서 oldStr을 newStr로 모두 교체  ()
        function replaceAll(output,oldStr,newStr) { 
            //join, split
            return output.split(oldStr).join(newStr); //********??
        }

    </script>
</head>
<body>

</body>
</html>